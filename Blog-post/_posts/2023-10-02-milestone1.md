---
layout: post
title:  "LIFT 6758 Project: Milestone 1"
subtitle: "Six Subtitle"
date:   2023-10-02
---

## 1. Data Acquisition

<b> NHL Stats API </b><br>

The NHL offers an API that provides access to extensive play by play information for all NHL games, including both regular season and playoff matches. This data is highly detailed. We can utilise this data for analysis of aspects such as individual player performance and team patterns.

To obtain the play by play data, for a game we send a GET request to the following API endpoint;
{% highlight python %}
https://statsapi.web.nhl.com/api/v1/game/ <game_id> /feed/live/
{% endhighlight %}

with <game_id> representing the ID of the game you want to retrieve data for. All other useful REST endpoints can be found at the unofficial API found here: https://gitlab.com/dword4/nhlapi/-/blob/master/stats-api.md


<b> Extracting Data for a single Game </b><br>

Since we've identified the correct endpoint of interest using the <game_id>, we now want a means to extract the data. We can utilise the Python requests API (https://pypi.org/project/requests/) using the follwing code snippit:

{% highlight python %}
requests.get('https://statsapi.web.nhl.com/api/v1/game/'+str(game_id)+'/feed/live/')
{% endhighlight %}

This will give us a JSON extract of the play-by-play data for that one game.

<b> Extracting Data for Seasons</b><br>

To get all data for specified seasons we need a way of getting all game_ids for a specific season first. To get that we can utilise the NHL API schedule endpoint (https://statsapi.web.nhl.com/api/v1/schedule) to get all game_ids for a specified season. The function we have that does just that that is:

{% highlight python %}
_get_associated_game_ids(self, game_type: str, season: str)
{% endhighlight %}

where gamt_type can be either 'R' for Regular or 'P' for Playoffs and season is a string of the speicfied season, Ex. "20162017". _get_associated_game_ids() is a private method as it is an internal helper function to get all data for a season defined as:

{% highlight python %}
download_play_by_play_data_for_season(self, season: str, game_type:str)
{% endhighlight %}

Using this method we can retrieve all data for a single season/game-type specified. We can then all combinations of seasons and playoffs and then retriesve all data needed. We achieve this in the following accessbile function:

{% highlight python %}
download_all_play_by_play_data(self, seasons:list, game_types:list)
{% endhighlight %}

where seasons is a list of seasons and game_types list of all data needed. Example usage:

{% highlight python %}
from dataAcquisition import DataAcquisition

data_aquirer = DataAcquisition()
seasons = ['20162017', '20172018', '20182019', '20192020', '20202021']
game_types = ['R', 'P']

data_aquirer.download_all_play_by_play_data(seasons, game_types)
{% endhighlight %}

All JSONs will be downloaded under a "data/" directory under your current directory.

## 2. Interactive Debugging Tool
(Your content goes here)

## 3. Tidy Data
(Your content goes here)

## 4. Simple Visualizations
(Your content goes here)

## 5. Advanced Visualizations: Shot Maps
(Your content goes here)
