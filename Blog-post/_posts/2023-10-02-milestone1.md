---
layout: post
title:  "LIFT 6758 Project: Milestone 1"
subtitle: "Six Subtitle"
date:   2023-10-02
---

## 1. Data Acquisition
(Your content goes here)

## 2. Interactive Debugging Tool
(Your content goes here)

## 3. Tidy Data

### Data Snippet

![Insert screenshot of final dataframe here using head(10)](/assets/images/dataframe.png)

### Determining On-Ice Strength for Shots and Goals

A team's strength can fluctuate due to penalties, leading to power play opportunities or being short-handed. Here's an approach to determine the on-ice strength for each shot or goal:

1. **Initialize Counters**: 
   For each shot or goal event, start by initializing two counters, both set to 5. This represents even strength (5 on 5, excluding goalies).

2. **Assess Recent History**:
   Read the `dateTime` attribute of the shot or goal and look backward in the `liveData` dictionary until you find an event that occurred more than 5 minutes prior. This 5-minute window captures any penalties that could affect the on-ice strength.

3. **Handle Penalties**:
   - For events of type `PENALTY` that are labeled as major penalties, identify the penalized team.
   - Decrease the counter for that team by 1, irrespective of any goals scored during the penalty. 
   **Handle Minor Penalties**:
   - If there's an event of type `PENALTY` that's labeled as a minor penalty, check if its `dateTime` is within 2 minutes of the current shot or goal event.
   - If it's within this 2-minute window, determine the penalized team. Decrease the counter for that team by 1. If it's outside this window, the penalty has expired, and you can ignore it.

4. **Assign Strength**:
   Create the `strength` attribute for each shot or goal by displaying the counters of both teams. For instance, if Team A is shooting on Team B, and the counters are 4 and 5 respectively, the strength would be represented as "4 on 5".

### Additional Features from the Dataset

From the available dataset:

1. **Rebound Shots**: Identify a rebound shot by observing two consecutive shots from the same team that happen quickly and are close in location. The subsequent shot can be labeled as a rebound.
2. **Rush Shots**: Classify a shot as a "rush shot" if it occurs shortly after a defensive event for the same team, indicating rapid puck movement from the defensive to offensive zone.
3. **Zone Time Before Shot**: Measure the duration a team spends in the offensive zone before taking a shot. It can highlight a team's possession and pressure abilities. Track events like offensive zone "FACEOFF" wins or "TAKEAWAY" to start the timer, and stop it at the next shot event.


## 4. Simple Visualizations 

### Question 1: Comparing The Shot Types Over All Teams
![comparing the shot types over all teams](/assets/images/shotTypes.png)
#### Description:
From the provided chart, the shot types are categorized by their frequency (count) and the associated goal rate (percentage of shots that result in a goal).

**Most Common Shot Type:** The 'Wrist Shot' is the most common shot type as its count surpasses all other shot types by a significant margin.

**Most Dangerous Shot Type:** Based on goal rate, the 'Tip in' shot type appears to be the most dangerous in season 2020-2021, with a goal rate of 21.98%. 

#### Discussion:

Wrist shots are the most frequently used shot type, which might be due to the fact that they can be executed quickly and require less space compared to other shots. They are versatile and can be taken from various angles and positions on the ice.

However, The 'Tip in' shots have the highest goal rate. This makes sense as tip-ins involve players redirecting a shot.

---

### Question 2: Analysis of Conversion Rate and Total Shots by Shot Distance

---

**Note on Shot Distance Calculation**:

When calculating the distance of shots, we've based our methodology on a typical result observed in NHL matches. Specifically, the coordinates of goals scored right at the goal line appear to be more like `(84,0)` for North American matches. For a detailed reference, you can review this [discussion on RapidMiner Community](https://community.rapidminer.com/discussion/44904/using-the-nhl-api-to-analyze-pro-ice-hockey-data-part-1).

Furthermore, based on NHL statistics, it's assumed that all shots are aimed at the nearest goal. This assumption aligns with observations and data from the NHL, as detailed in this [OMHA article on the science of scoring](https://www.omha.net/news_article/show/667329-the-science-of-scoring).

---

![Season 2018-2019](/assets/images/20182019.png)
![Season 2019-2020](/assets/images/20192020.png)
![Season 2020-2021](/assets/images/20202021.png)
#### Conversion Rate vs Shot Distance:

**Close to Goal**:
- Shots taken between 0-10 feet from the goal have a high conversion rate of around 20%.
  
**Mid-Range Shots**:
- As players shoot from further out, the conversion rate drops significantly. 
  
**Long Shots**:
- Beyond 35 feet, the conversion rate is relatively stable. At distances of 80 meters and beyond, the rate is nearly zero, but there's a noticeable spike between 85-95 meters.

#### Total Shots vs Shot Distance:

**Most Popular Distance**:
- The majority of shots are taken from 5-10 feet.
  
**Steady Range**:
- Between 15-55 feet, the number of shots remains fairly consistent.
  
**Rare Long Shots**:
- Shots from distances greater than 80 meters are uncommon, which aligns with the low conversion rates observed from those distances.

#### Summary:

The shot patterns and conversion rates have been consistent over the past three seasons. The reason we chose this graph is that the graph effectively displays these trends and by juxtaposing the shot count with the conversion rate, the visualization effectively dispels potential misconceptions â€” like a low shot count yielding an anomalously high conversion rate.


### Question 3: Analysis of Goal Rate and Shots Types by Shot Distance

---

**Note on Data Representation and Filtering**:

In creating this plot, we have employed simple descriptive statistics (e.g., the median or the 25th percentile of shot counts) to represent the goal percentages for each shot type across various distances. Importantly, to ensure the accuracy and prevent potential misinterpretations of the results, we have set a fixed threshold for the number of shots taken at a specific distance.

Specifically, only shot types with a count greater than 20 at a particular distance have been included in the graph. This threshold was set to avoid visualizing shot types with low sample sizes, which could produce misleading insights or overemphasize rare occurrences.

```python
threshold = 20
grouped_type = grouped_type[grouped_type['total_shots'] > threshold]
```

---

![comparing the shot types and distance](/assets/images/function_shot_distance.png)
#### Finding:

**High Goal Percentage**: 
- The "Slap Shot" is the most effective when taken from both close and medium distance range (0-35). Its goal rate is the highest among that range.  So that it appears to be the most dangerous shot type.

**Medium To Long Distance Shots**: 
- The "Tip in" shots shows effectiveness at the range of 40-60 feet , with a higher goal percentage than others. 
- The "Wrist Shot" has a higher likelihood of resulting in goals

**Consistency Across Distances**: 
- "Slap Shot" and "Snap Shot" have relatively consistent goal rates across various distances, especially from 10-55. Their consistency might make them reliable shot choices in many game situations


## 5. Advanced Visualizations: Shot Maps
(Your content goes here)
